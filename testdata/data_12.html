roadmap:
9. [ ] error messages are not deterministic (position change after each execution), same for 'stringer' of types.Type
9. [ ] 'data_07.html' has issue with template definition not showing up sometimes, as well as 'template undefined' issue
although those templates are defined in the same file
9. [ ] Another error at line 450, look for 'BUG' toward the bottom of the file (CRITICAL)

{{ if . }}
{{ else with . }}
{{ end }}

{{ with . }}
{{ else if . }}
{{ end }}

{{ if . }}
{{ else if . }}
{{ else }}
{{ else }}
{{ else if .}}
{{ end }}

{{ define "yamo" }}
	{{ if }} 
		{{ template "tekka" }}

		{{ range }}
			{{ template "tekka" }}
		{{ end }}
	{{ end }}

	{{ range }}
		{{ template "tekka" }}
	{{ end }}
{{ end }}

{{ define "tekka" }}
{{ end }}

{{ template 23 }}
{{ template  }}
{{ define 23 }} {{ end }}

{{ (getPerson "kalel" ).ame }}
{{ (getPerson "kalel").Name }}
{{ (((getPerson "kalel"))) ("nano").ame }}
{{ $mason := getPerson (((getPerson "kalel"))) ("nano").ame }}
{{ $mason }}
{{ $person := getPerson "kalel" }}

{{ $person.Name }}
{{ $person.Age }}

{{ getPerson$name }}

{{ ` ` }}
{{ `hello melcore` }}
{{ "hello world" }}
{{ 2222 }}
{{ true }}
{{ false }}
{{ 34.45 }} // not working as intended
{{ 33.04 }}

{{ 3.i }}
{{ $root := $ }}
{{ $r_key := .any }}
{{ $r_val := .any }}
{{ magic $r_val $r_key }}
{{ magic $r_val $r_key.jay }}
{{ $makr := $r_key.jello }}
{{ $makr }}

{{ range $r_key, $r_val = $root }}
	{{ break }}
	{{ continue }}
{{end}}

{{ break }}
{{ continue }}


{{ if "nana" }}
{{ else }} // make same thing than for 'end' in regard to go-to definition
{{ end }} // make go-to definition work on 'end', so that it bring back to group header ('if', 'range', ...)

{{ $killer := "mael" }}
{{ if . }}
{{ . }}
{{ else }}
{{ $ }}
{{ . }}
{{ else if "name"}}
{{ $ }}
{{ . }}
{{ else if $killer := "name"}}
{{ $killer }}
{{ $ }}
{{ . }}
{{ else }}
{{ $ }}
{{ . }}
{{ end }}

{{ the name is malik }}
{{ "namer"}}
{{ }}

{{ if template "name" .}}
{{ end }}

{{ .name }}

{{ with .forspoken }}
	{{ . }}
	{{ magic .name .age }}
	{{ magic .age .name }}
{{ else with "name"}}
	{{ . }}
	{{ .name }}
	{{ $.age }}
{{ else with .unspoken }}
	{{ . }}
	{{ magic .name .age }}
{{ else }}
	{{ . }}
	{{ .age }}
	{{ .city }}
{{ end }}

{{ dddd }}
{{ .ok }}

{{ dddd }}
{{ $m_key := .m_key }}
{{ $m_val := .m_val }}
{{ $mage := .mage }}
{{ range $m_key, $m_val = $mage }}
	{{ $mage := 234.5 }}
	{{ $}}
	{{ . }}
	{{ magic $key . }}
{{ end }}

{{ $ki := 0 }}
{{ if $ki }}
	{{ $ki := 33.3 }}
{{ end }}

{{ .unspoken.series }}
{{ range .unspoken.series }}
{{ break }}
{{ continue }}
{{ $.tele }}
{{ $.unspoken }}
{{ . }} // fixme: variable name is weird
{{ magic . . }}
{{ else }}
{{ . }}
{{ magic . 12 }}
{{ end }}

{{ range $key, $val = .unspoken.alt }}
	{{ break }}
{{ end }}

{{ range $key, = .unspoken.alt }} // this error make no sense
{{ end }}

{{ range $key, $val := .unspoken.alt }} // this one cause the lsp to crash
	{{ break }}
{{ end }}

{{ range template "name" }}
{{ end }}

{{ range $key, $val := .unspoken.alt }}
{{ $key }}
{{ magic $key 12 }}
{{ magic $key $val }}
{{ magic $key . }}
{{ magic $key $val }}
{{ magic "hello" $key }}
{{ magic $val $key }}
{{ srange $val }} {{ send }}
{{ . }}
{{ end }}

{{ range $key, $val := $.forspoken }}
{{ $key }} {{ }} // $key, and $val must be set to 'invalid type' ???
{{ . }}
{{ magic . 12 }}
{{ srange $val}} {{ . }} {{ send }} // this make the program crash
{{ end }}


{{ range $index, $val := .unspoken.series }}
{{ . }}
{{ $index }}
{{ $val }} // to_fix: hovering this variable break the lsp
{{ end }}

{{ range $val := .unspoken.series }}
{{ . }}
{{ $val }}
{{ $val }}
{{ end }}

{{ .unspoken.series }}

{{ $id, $el := . }}
{{ $id, $el, $doc := . }}

{{ $ }}
{{ . }}
{{ $.name }}
{{ $.name }}
{{ $.age }}
{{ $.Stringer.city }}
{{ magic $.name $.age }}
{{ magic $.age $.age }}
{{ magic .age .age }}
{{ magic $kate $.age }}
{{ magic 12 $kate $.age }}
{{ carole.city }}
{{ carolee.j }}
{{ carolee.derision }}
{{ merkol.city }}
{{ $name. }}
{{ $12 }}
{{ .12 }} // this should be a float

{{ diction }}
{{ martinelli }}

{{ template "name" . }}
{{ $name := "hello" }}
{{ $name.mes }}

{{ .unspoken }}
{{ .unspoken.no }}
{{ .unspoken.alt }}
{{ .unspoken.typ }}
{{ .unspoken.name }}

{{ magic .unspoken.alt .age }}
{{ magic .unspoken.alt .unspoken.alt }}
{{ caster .nana .nana .nana }}

{{ $.nana }}
{{ range $val := $.nana }}
{{ $key }}
{{ $val }}
{{ end }}

{{ $melcore := $.melcore }}
{{ $melcore }} // hover should give 'invalid type' in place of 'any'
{{ magic $melcore 12}}

{{ $arr := .arr }}
{{ range $key, $val := $arr }}
	{{ $key }}
	{{ $val }}
{{ end }}
{{ magic . .arr  }}
{{ range $key, $val := $arr }}
	{{ $key }}
	{{ $val }}
	{{ magic $key $val }}
	{{ magic $key . }}
{{ end }}

{{ $old_key := .old_key_n }}
{{ $old_val := .old_val_n }}
{{ range $old_key, $old_val = .unspoken.alt }}
	{{ $old_key }}
	{{ $old_val }}
	{{ magic $old_key $old_val }}

	{{ range $val, $key = $.unspoken.alt }}
	{{ end }}

	{{ magic . $key }} // error here

	{{ range $val, $key = $.unspoken.alt }}
	{{ end }}

	{{ magic $key . }} // error here
	{{ magic $key $val }} // error here
	{{ magic $val $key }} // error here
	{{ . }} // change variable name that display on hover
{{ end }}

=====

{{ $key := .key }}
{{ $val := .val }}
{{ }}
{{ $billy := .billy }}

{{ dd .dd }}
{{ .kk }}
{{ $_key := ._key }}
{{ $_val := ._val }}
{{ range $_key, $_val = .billy }}
{{ end }}

{{ range $_key, $_val = $.billy }}
{{ end }}

{{ range $_key, $_val = $billy }}
	{{ magic $key . }}
{{ end }}

{{ dd }}

{{ range $key, $val = .unspoken.alt }}

{{ range $val, $key = $.unspoken.alt }}
	{{ magic . $key }} // error here

	{{ range $val = $.unspoken.alt }}
		{{ range $key, $val := $.unspoken.alt }}
			{{ $key }}
			{{ $val }}
			{{ . }}
			{{ magic . $key }} // error here

			{{ range $key, $val = $.unspoken.alt }}
			{{ end }}

			{{ range $val, $key = $.unspoken.alt }}
				{{ magic . $key }} // error here
			{{ end }}

			{{ magic . $key }} // error here
		{{ end }}

		{{ $val }}
		{{ $key }}
	{{ end }}

	{{ range $val, . = $.unspoken.alt }} // unfortunately, this make the loop content be discarded
		{{ . }}
	{{ end }}
{{ end }}

{{ range $key, $val = $.unspoken.alt }}
{{ end }}
{{ magic . $key }} // error here

{{ range $val, $key = $.unspoken.alt }}
{{ end }}

{{ magic $key . }} // error here
{{ magic $key $val }} // error here
{{ magic $val $key }} // error here
{{ . }} // change variable name that display on hover
{{ end }}

{{ range $val, $key = .unspoken.alt }}
{{ magic $key $val }} // error here
{{ end }}

{{- /* go:code
// Warning: What if go:code is inside 'range' scope ?
type xInput struct {
name string
city string
age int
unspoken struct {
typ int
name string
alt any
series []string
}
ok bool
}

type Person struct { Name string ; Age int }
func getPerson (name string) *Person

func (i Input) Stringer() Input

func martinelli() string
func magic(name string, age int) string
func caster(name string, age int, flt float32) string
func carole () Input
func merkol (str string) Input
*/ -}}

{{ jjj jjj jjj $person := . }}
{{ $person.info.name }}
{{ $person.info.name }}
{{ $person.info.name }}

{{ if () }}
{{ end }}

{{ $num := 123 }}
{{ $num = 3 }}
{{ $str := "ddd" }}
{{ $str = .unspoken.alt }}
{{ $num = .unspoken.alt }}
{{ $num = .name }}
{{ $num = .name }}
{{ $any := .unspoken.alt }}
{{ $any = 12 }}
{{ $num }}
{{ $any}}

{{ $.city.geo }}

{{ $ }}
{{ template "meborne" . }}


{{ template "ee" . }}

{{ $name }}

{{ define "alal" jtx }}

{{ template "meborne" . }}
{{ . }}

{{ end }}

{{ define "meborne" }}
{{ template "laptop" . }}
{{ end }}

{{ template "tmp_12" . }}

{{ block "tmp_12" . }} // bug: this behave weirdly
{{ end }}

{{ magic .Name .Counter }}
{{ magic "nono" . }}
{{ block "tmp_1" 22 }} // bug: this behave weirdly
	{{ magic . 44 }}
{{ end }}


{{ with .unspoken }}
{{ . }}
{{ magic .name .age }}

// BUG: WIP 
{{ else with $new_age := .unspoken.new_age }}
	// error on $new_age, sometimes the error appear and other time not
	// After a quick investigation, this is because after all locals '.' var have been resolved
	// Then '$new_age' is once again checked agains '.unspoken.new_age'
	// In my opinion, this shouldn't be necessary since it is a variable declaration
	// In another case, the same issue would have appeared anyway with assignment variable as well
	// So I have to find a way to make :
	// --> 'struct{ Age int; Name string}' equal to 'struct{ Name string; Age int}'
	{{ . }}
	{{ . }}
	{{ $name := $new_age.name }}
	{{ $age := $new_age.age }}

	{{ magic .name .age }}
	{{ magic $name $age }}
{{ else with "name"}}
{{ . }}
{{ .name }}
{{ $.age }}
{{ magic . . }}
{{ else with .unspoken }}
{{ . }}
{{ magic .name .age }}
{{ else }}
{{ . }}
{{ .age }}
{{ .city }}
{{ end }}

